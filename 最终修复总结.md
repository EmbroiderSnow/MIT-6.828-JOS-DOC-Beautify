# æœ€ç»ˆä¿®å¤æ€»ç»“ - CSSæ¸²æŸ“å’Œè¯­æ³•é«˜äº®é—®é¢˜

## ğŸ” é—®é¢˜æ ¹æœ¬åŸå› åˆ†æ

é€šè¿‡æ·±å…¥åˆ†æï¼Œæˆ‘å‘ç°äº†å¯¼è‡´è¯­æ³•é«˜äº®å’ŒCSSæ ·å¼ä¸å·¥ä½œçš„æ ¹æœ¬åŸå› ï¼š

### 1. **å¢å¼ºæ–‡ä»¶æ’å…¥ä½ç½®é”™è¯¯**
- **é—®é¢˜ï¼š** å¢å¼ºçš„CSSå’ŒJSæ–‡ä»¶è¢«æ’å…¥åˆ°äº†`</head>`æ ‡ç­¾**ä¹‹å**ï¼Œè€Œä¸æ˜¯ä¹‹å‰
- **ç»“æœï¼š** æ–‡ä»¶åœ¨`<body>`ä¸­ï¼Œæ— æ³•æ­£ç¡®åŠ è½½å’Œè§£æ

### 2. **CSSä¼˜å…ˆçº§å†²çª**  
- **é—®é¢˜ï¼š** Wayback Machineçš„CSSæ ·å¼è¦†ç›–äº†æˆ‘ä»¬çš„ç°ä»£åŒ–æ ·å¼
- **ç»“æœï¼š** ä»£ç å—ä»ç„¶æ˜¾ç¤ºä¸ºåŸå§‹çš„ç®€å•æ ·å¼

### 3. **é‡å¤æ’å…¥å¢å¼ºä»£ç **
- **é—®é¢˜ï¼š** æ¯æ¬¡è¿è¡Œè„šæœ¬éƒ½ä¼šé‡å¤æ’å…¥å¢å¼ºä»£ç 
- **ç»“æœï¼š** é€ æˆå†²çªå’Œæ··ä¹±

## âœ… å®Œæ•´ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤æ–‡ä»¶æ’å…¥é€»è¾‘

**é—®é¢˜å®šä½ï¼š**
```html
<!-- é”™è¯¯çš„æ’å…¥ä½ç½® -->
</head>
<!-- MIT 6.828 å®éªŒæ–‡æ¡£ç°ä»£åŒ–å¢å¼º -->  âŒ åœ¨bodyä¸­
<link rel="stylesheet" href="labs-modern.css" type="text/css">
<script src="labs-enhance.js"></script>
<body>
```

**ä¿®å¤åï¼š**
```html
<!-- æ­£ç¡®çš„æ’å…¥ä½ç½® -->
<!-- MIT 6.828 å®éªŒæ–‡æ¡£ç°ä»£åŒ–å¢å¼º -->  âœ… åœ¨headä¸­
<link rel="stylesheet" href="labs-modern.css" type="text/css">
<script src="labs-enhance.js"></script>
</head>
<body>
```

**ä¿®å¤ä»£ç ï¼š**
```python
# ç§»é™¤å¯èƒ½å­˜åœ¨çš„é‡å¤å¢å¼ºä»£ç 
content = re.sub(r'<!-- MIT 6\.828 å®éªŒæ–‡æ¡£ç°ä»£åŒ–å¢å¼º -->.*?<script src="labs-enhance\.js"></script>\s*', '', content, flags=re.DOTALL)

# æŸ¥æ‰¾</head>æ ‡ç­¾çš„ä½ç½®ï¼ˆåœ¨æ¸…ç†åçš„å†…å®¹ä¸­ï¼‰
head_pattern = r'</head>'
head_match = re.search(head_pattern, content, re.IGNORECASE)

# åœ¨</head>å‰æ’å…¥å¢å¼ºä»£ç 
insert_position = head_match.start()
enhanced_content = (
    content[:insert_position] + 
    enhancement_code + 
    content[insert_position:]
)
```

### 2. å¢å¼ºCSSä¼˜å…ˆçº§

**ä¿®å¤å‰çš„CSSï¼š**
```css
pre {
  background: var(--bg-code);
  color: var(--text-code);
  /* ... */
}
```

**ä¿®å¤åçš„CSSï¼š**
```css
/* é«˜ä¼˜å…ˆçº§è¦†ç›– - å¤šé‡é€‰æ‹©å™¨ + !important */
body pre,
.content pre,
div pre,
pre {
  font-family: var(--font-mono) !important;
  background: var(--bg-code) !important;
  color: var(--text-code) !important;
  /* ... æ‰€æœ‰æ ·å¼éƒ½åŠ äº† !important */
}

/* å¢å¼ºä»£ç å—ä¸“ç”¨æ ·å¼ */
.code-block-wrapper {
  margin: 1.5rem 0 !important;
  border-radius: var(--border-radius-lg) !important;
  overflow: hidden !important;
  background: var(--bg-code) !important;
  box-shadow: var(--shadow-lg) !important;
}
```

### 3. å­—ç¬¦ç¼–ç ä¿®å¤

ç¡®ä¿æ‰€æœ‰æ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç ï¼š
```python
# ä¿®å¤å­—ç¬¦ç¼–ç é—®é¢˜
content = content.replace('charset=windows-1252', 'charset=UTF-8')
content = content.replace('charset="windows-1252"', 'charset="UTF-8"')
```

## ğŸ”§ ä¿®å¤æµç¨‹

1. **æ¸…ç†é‡å¤å†…å®¹** - ç§»é™¤ä¹‹å‰é”™è¯¯æ’å…¥çš„å¢å¼ºä»£ç 
2. **ä¿®å¤å­—ç¬¦ç¼–ç ** - ç¡®ä¿UTF-8ç¼–ç 
3. **æ­£ç¡®æ’å…¥å¢å¼º** - åœ¨`</head>`å‰æ’å…¥CSSå’ŒJS
4. **å¢å¼ºæ ·å¼ä¼˜å…ˆçº§** - ä½¿ç”¨!importantè¦†ç›–åŸå§‹æ ·å¼
5. **æ·»åŠ è°ƒè¯•ä¿¡æ¯** - ä¾¿äºé—®é¢˜è¯Šæ–­

## ğŸ“Š ä¿®å¤éªŒè¯

### âœ… å·²ç¡®è®¤ä¿®å¤
- **æ–‡ä»¶æ’å…¥ä½ç½®** - å¢å¼ºä»£ç ç°åœ¨åœ¨`</head>`å‰æ­£ç¡®æ’å…¥
- **å­—ç¬¦ç¼–ç ** - æ‰€æœ‰æ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç 
- **CopyæŒ‰é’®** - æ˜¾ç¤ºæ¸…æ™°çš„"COPY"æ–‡æœ¬
- **CSSåŠ è½½** - æ ·å¼æ–‡ä»¶åœ¨æ­£ç¡®ä½ç½®å¼•ç”¨

### ğŸ” é¢„æœŸæ•ˆæœ
ç°åœ¨åº”è¯¥å¯ä»¥çœ‹åˆ°ï¼š
- âœ… ç°ä»£åŒ–çš„ä»£ç å—æ ·å¼ï¼ˆæ·±è‰²èƒŒæ™¯ã€åœ†è§’è¾¹æ¡†ï¼‰
- âœ… è¯­æ³•é«˜äº®çš„å½©è‰²ä»£ç 
- âœ… åŠŸèƒ½å®Œæ•´çš„COPYæŒ‰é’®
- âœ… å“åº”å¼è®¾è®¡å’Œä¸»é¢˜åˆ‡æ¢

### ğŸ“‹ éªŒè¯æ­¥éª¤
1. **æ‰“å¼€ä»»ä½•Lab HTMLæ–‡ä»¶**
2. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°** (F12)ï¼š
   - åº”è¯¥çœ‹åˆ°ï¼š"MIT 6.828 Labs Enhancement Script Loading..."
   - ç„¶åæ˜¯ï¼š"MIT 6.828 Labs Enhancement Script Loaded Successfully!"
   - è¿˜æœ‰ï¼š"`Found X pre elements to enhance`"
3. **æŸ¥çœ‹ä»£ç å—**ï¼š
   - åº”è¯¥æœ‰ç°ä»£åŒ–çš„æ·±è‰²æ ·å¼
   - ä»£ç åº”è¯¥æœ‰å½©è‰²è¯­æ³•é«˜äº®
   - å³ä¸Šè§’æœ‰"COPY"æŒ‰é’®

### ğŸ†˜ å¦‚æœä»æœ‰é—®é¢˜
1. **æ£€æŸ¥æ–‡ä»¶è·¯å¾„** - ç¡®ä¿`labs-modern.css`å’Œ`labs-enhance.js`åœ¨åŒä¸€ç›®å½•
2. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜** - å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+F5ï¼‰
3. **æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯** - æ£€æŸ¥æ˜¯å¦æœ‰æ–‡ä»¶åŠ è½½å¤±è´¥
4. **æµ‹è¯•ç®€åŒ–ç‰ˆæœ¬** - æ‰“å¼€`test-enhanced.html`è¿›è¡Œå¯¹æ¯”

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

- `install-enhancements.py` - ä¿®å¤æ’å…¥é€»è¾‘å’Œæ¸…ç†åŠŸèƒ½
- `labs-modern.css` - å¢å¼ºæ ·å¼ä¼˜å…ˆçº§
- `labs-enhance.js` - æ·»åŠ è°ƒè¯•ä¿¡æ¯
- æ‰€æœ‰Lab HTMLæ–‡ä»¶ - é‡æ–°æ­£ç¡®åº”ç”¨å¢å¼º

ä¿®å¤ç°åœ¨åº”è¯¥å®Œå…¨è§£å†³äº†CSSæ¸²æŸ“å’Œè¯­æ³•é«˜äº®çš„é—®é¢˜ï¼ğŸ‰
